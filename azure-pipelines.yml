pool:
  vmImage: 'vs2017-win2016'

variables:
  buildConfiguration: 'Release'

steps:
#- script: |
    #dotnet build ./src/ClassLibrary1/ClassLibrary1.csproj --configuration $(buildConfiguration)
    #dotnet build ./src/ClassLibrary2/ClassLibrary2.csproj --configuration $(buildConfiguration)
  #displayName: 'dotnet build $(buildConfiguration) Libraries'
  

#- script: |
    #dotnet nuget push ./src/ClassLibrary1/bin/Release/*.nupkg --no-symbols --api-key $(MyGetKey) --source https://www.myget.org/F/stef-test/api/v2/package
  #displayName: 'Publish to MyGet 1 !'

- task: DotNetCoreCLI@2
  displayName: 'Build !'
  inputs:
    configuration: '$(BuildConfiguration)'
    command: 'build'
    projects: '**/*.csproj'

- task: DotNetCoreCLI@2
  displayName: 'MyGet !'
  inputs:
    configuration: '$(BuildConfiguration)'
    command: 'push'
    projects: '**/*.csproj'
    packagesToPush: '**/*.nupkg'
    nuGetFeedType: 'external' 
    publishVstsFeed: 'https://www.myget.org/F/stef-test/api/v2/package'
    publishFeedCredentials: '$(MyGetKey)'
    versioningScheme: 'byPrereleaseNumber'